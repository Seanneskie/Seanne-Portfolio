<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTables - Seanneskie</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.5/css/dataTables.dataTables.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="static/favicon-32x32.png">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.5/js/dataTables.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/tailwind-config.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <style>
      :root {
        --coal: #2b2b2b;
        --obsidian: #1a1a1a;
        --onyx: #0f0f0f;
        --charcoal: #36454f;
        --sable: #051229;
        --text: #ccd0cf;
        --text-dark: #0f0f0f;
        --text-hover: #ffffff;
      }
      .light-theme {
        --coal: #f5f5f5;
        --obsidian: #ffffff;
        --onyx: #eaeaea;
        --charcoal: #dddddd;
        --sable: #fafafa;
        --text: #333333;
        --text-dark: #0f0f0f;
        --text-hover: #000000;
      }
    </style>
    <style type="text/tailwindcss">
      @layer base {
        body { @apply bg-obsidian text-text font-sans; }
      }
    </style>
    

</head>
<body data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="70" tabindex="0" class="bg-obsidian text-text font-sans">
    <nav id="mainNav" class="navbar navbar-expand-lg navbar-dark bg-charcoal">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="index.html#profile">Portfolio</a></li>
                    <li class="nav-item"><a class="nav-link active bg-nav-active text-text-hover" href="datatables.html">DataTables Demo</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section id="profile">
        <div class="container mt-4 bg-dark text-white p-3">
            <div id="toggle-visibility" class="mb-3">
                <div id="tab1-toggles" class="tab-toggles">
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="0">Toggle Name</a>
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="1">Toggle Position</a>
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="2">Toggle Office</a>
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="3">Toggle Age</a>
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="4">Toggle Start date</a>
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="5">Toggle Salary</a>
                    <a href="#" class="toggle-vis btn btn-sm bg-secondary text-text-hover border border-secondary" data-column="6">Toggle Country</a>
                </div>
            </div>
        
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active text-white bg-nav-active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button">Table 1</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link text-white bg-dark" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button">Table 2</button>
                </li>
            </ul>
        
            <div class="tab-content mt-2">
                <div class="tab-pane fade show active" id="tab1" role="tabpanel">
                    <table id="table1" class="table table-striped table-bordered w-full table-auto bg-table-dark text-text-hover">
                        <thead>
                            <tr>
                                <th class="w-15p">Name</th>
                                <th class="w-15p">Position</th>
                                <th class="w-10p">Office</th>
                                <th class="w-5p">Age</th>
                                <th class="w-15p">Start date</th>
                                <th class="w-15p">Salary</th>
                                <th class="w-20p">Country</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th class="w-15p">Name</th>
                                <th class="w-15p">Position</th>
                                <th class="w-10p">Office</th>
                                <th class="w-5p">Age</th>
                                <th class="w-15p">Start date</th>
                                <th class="w-15p">Salary</th>
                                <th class="w-20p">Country</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <!-- Data will be loaded via DataTables -->
                        </tbody>
                    </table>
                </div>
        
                <div class="tab-pane fade" id="tab2" role="tabpanel">
                    <table id="table2" class="table table-striped table-bordered w-full table-auto bg-table-dark text-text-hover">
                        <thead>
                            <tr>
                                <th class="w-15p">Name</th>
                                <th class="w-15p">Position</th>
                                <th class="w-10p">Office</th>
                                <th class="w-5p">Age</th>
                                <th class="w-15p">Start date</th>
                                <th class="w-15p">Salary</th>
                                <th class="w-20p">Country</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th class="w-15p">Name</th>
                                <th class="w-15p">Position</th>
                                <th class="w-10p">Office</th>
                                <th class="w-5p">Age</th>
                                <th class="w-15p">Start date</th>
                                <th class="w-15p">Salary</th>
                                <th class="w-20p">Country</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <!-- Filtered data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        
            <button id="button" class="btn btn-danger mt-3">Delete Selected Row</button>
        </div>
        
        
    </section>
    <footer class="footer">
        <div class="container">
            <div class="footer-row">
                <div class="footer-col">
                    <h5>Quick Links</h5>
                    <ul class="footer-links">
                        <li><a href="index.html#profile">Portfolio</a></li>
                        <li><a href="datatables.html">DataTables Demo</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h5>Follow Me</h5>
                    <a href="#" class="social-link">
                        <i class="fab fa-facebook"></i> Facebook
                    </a>
                    <a href="#" class="social-link">
                        <i class="fab fa-twitter"></i> Twitter
                    </a>
                    <a href="#" class="social-link">
                        <i class="fab fa-linkedin"></i> LinkedIn
                    </a>
                </div>
            </div>
            <div class="footer-copy">
                <p>&copy; 2024 Seanneskie. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
       window.onload = function() {
            // Trigger the click event for the button with id 'tab2-tab'
            document.getElementById("tab2-tab").click();
        };


    </script>
    <script>
       $(document).ready(function() {
            var allData = [];
            
            // Load the CSV data
            $.ajax({
                url: './assets/datafiles/data.csv', // Your data.csv file
                dataType: 'text',
                success: function (data) {
                    var rows = data.split('\n');
                    var combinedData = [];
                    var filteredData = [];
                    
                    // Process CSV data
                    for (var i = 1; i < rows.length; i++) { // Skip header row
                        var cells = rows[i].split(',');
                        if (cells.length >= 7) { // Ensure we have enough data for both tables
                            // Push to combinedData (Table 1)
                            combinedData.push(cells);
                            // Filter rows with start date from 1965 for Table 2
                            var startDate = new Date(cells[4]);
                            if (startDate.getFullYear() >= 1965) {
                                filteredData.push(cells);
                            }
                        }
                    }
                    
                    // Initialize DataTables for Table 1 with pagination at the top and no search bar
                    var table1 = $('#table1').DataTable({
                        data: combinedData,
                        columns: [
                            { title: "Name" },
                            { title: "Position" },
                            { title: "Office" },
                            { title: "Age" },
                            { title: "Start date" },
                            { title: "Salary" },
                            { title: "Country" }
                        ],
                        dom: '<"top"p>rt<"bottom"il><"clear">', // Moves pagination to top and entries to bottom, no search bar
                        initComplete: function () {
                            this.api()
                                .columns()
                                .every(function () {
                                    let column = this;
                                    let title = column.footer().textContent;

                                    // Create input element for filtering
                                    let input = document.createElement('input');
                                    input.placeholder = 'Search ' + title;
                                    input.classList.add('w-32');
                                    column.footer().replaceChildren(input);

                                    // Add event listener for search functionality
                                    input.addEventListener('keyup', function () {
                                        if (column.search() !== this.value) {
                                            column.search(this.value).draw();
                                        }
                                    });
                                });
                        }
                    });

                    // Initialize DataTables for Table 2 (Filtered data from 1965 onwards)
                    var table2 = $('#table2').DataTable({
                        data: filteredData,
                        columns: [
                            { title: "Name" },
                            { title: "Position" },
                            { title: "Office" },
                            { title: "Age" },
                            { title: "Start date" },
                            { title: "Salary" },
                            { title: "Country" }
                        ],
                        dom: '<"top"p>rt<"bottom"il><"clear">',
                        initComplete: function () {
                            this.api()
                                .columns()
                                .every(function () {
                                    let column = this;
                                    let title = column.footer().textContent;

                                    // Create input element for filtering
                                    let input = document.createElement('input');
                                    input.placeholder = 'Search ' + title;
                                    input.classList.add('w-32');
                                    column.footer().replaceChildren(input);

                                    // Add event listener for search functionality
                                    input.addEventListener('keyup', function () {
                                        if (column.search() !== this.value) {
                                            column.search(this.value).draw();
                                        }
                                    });
                                });
                        }
                    });

                    $('.dt-paging').addClass('flex justify-center mb-2.5');
                    $('.dt-input').addClass('mr-3 mt-3');

                    // Handle Bootstrap tab change
                    $('button[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                        var target = $(e.target).data('bs-target'); // Get the target tab
                        var table = $(target).find('table').DataTable(); // Get the DataTable instance of the target tab

                        // Adjust columns
                        table.columns.adjust();

                        $(e.target).addClass('bg-nav-active').removeClass('bg-dark');
                        if (e.relatedTarget) {
                            $(e.relatedTarget).addClass('bg-dark').removeClass('bg-nav-active');
                        }
                    });

                    // Row click event handler for selecting rows
                    $('#table1 tbody, #table2 tbody').on('click', 'tr', function () {
                        $(this).toggleClass('selected bg-selected-row text-selected-text');
                    });

                    // Delete selected rows event handler
                    $('#button').on('click', function () {
                        var activeTableId = $('.nav-tabs .active').attr('id');
                        var table = activeTableId === 'tab1-tab' ? $('#table1').DataTable() : $('#table2').DataTable();
                        
                        // Remove selected rows
                        table.rows('.selected').remove().draw(false);
                    });

                    // Toggle column visibility
                    $('.toggle-vis').on('click', function (e) {
                        e.preventDefault();
                        var columnIdx = $(this).data('column');
                        var target = $('.nav-tabs .active').attr('id') === 'tab1-tab' ? '#table1' : '#table2';
                        var table = $(target).DataTable();

                        $(this).toggleClass('bg-primary border-primary');
                        $(this).toggleClass('bg-secondary border-secondary');

                        // Toggle the visibility
                        table.column(columnIdx).visible(!table.column(columnIdx).visible());
                    });
                }
            });
        });

    </script>
    <script>
        const scrollSpy = new bootstrap.ScrollSpy(document.body, { target: '#mainNav', offset: 70 });
    </script>

</body>
</html>
